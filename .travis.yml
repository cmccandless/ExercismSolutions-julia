sudo: false

language: julia

os:
  - osx
  - linux

julia:
  - 1.0
  - 1.1
  - nightly

matrix:
  # fast_finish marks the build as passing even if allow_failures builds are still running
  fast_finish: true
  include:
    - os: windows
      arch: x64
      julia: 1.0
    - os: windows
      arch: x86
      julia: 1.0
      name: "Julia 1 (32bit)"
    - os: windows
      arch: x64
      julia: 1.1
    - os: windows
      arch: x86
      julia: 1.1
      name: "Julia 1.1 (32bit)"
  allow_failures:
    - julia: nightly
    - arch: x86

matrix:
  include:
    - python: 3.6
      dist: trusty
      sudo: false
    - python: 3.7
      dist: xenial
      sudo: true
    - python: nightly
      dist: trusty
      sudo: false
  allow_failures:
    - python: nightly

script:
  - make -j8 test
